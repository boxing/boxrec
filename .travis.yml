language: node_js
node_js:
 - "8"
dist: trusty
install:
 - npm install
addons:
  sonarcloud:
    organization: "boxrec"
    token:
      secure: "LTNLtbxSRWx0kapBt+dT0JyNmzY4QXh1gEzT8N6chS4ZK2Kl6RHUqHamLqYqkehoWL0v4G5LDauJU/9JS3u28qooxVEcF3go85Y3Dl0ISEcFA76gKs74CprZZVvOtftbqsZeZF/Ej14fn+sYXr7v7RVoFwqnC/c565bcHRb3krMr+5nQ3YM9z8GECYUgTRum3TBbNXYIkMR1ZobbL/Jw8+frwuXOgJiFmXJRvCLglQF2o+Ala/92FeDq/qcKFGDmQaoC9/MJTDeY7pU/EGzrF2FZbD0qsFJOLDb7YKwpHG/A0bFSmZVgPHE9Cg+86HLwo1sTcN+1SFBfyjVdUTQFHTOY+GhU/MPhEXJ7nMvYFCN/m7q9ScVH/d4xCV4EF6+blUT6Nkz653cBrwP8qw3KA85J0YZ7zDmRh87L4/DHQRZAN6W9ktX+lKBQLnH19OPIC7l/yViOiXX1r/rAnyhj0MHUsAQ9/jyH79GofrP56TymE9sts9dvx65TnqDnkG45DBD4vO7DZbWM9xcO3Y/ZWlK8a85hxutRzvqFILhMnukauVucMf2V2fFVAupx3qOhLa1Voztyb6masucZaF3H5ZyA2sftjZGys6axWaGcuJGOScEuM8132nDflMibO+HoV9e9zUhWqNXbmZUGGywJwTaah6OV/KHUo2DIBkcO8lo="
script:
# for the time being, these tests will have to be manually run
#- if [ "$TRAVIS_EVENT_TYPE" = "cron" ]; then npm run test-e2e; fi
- if [ "$TRAVIS_EVENT_TYPE" != "cron" ]; then npm run test; fi
- sonar-scanner
cache:
  directories:
    - '$HOME/.sonar/cache'
notifications:
  email:
    recipients:
      - mikedidomizio@gmail.com
    on_success: never
    on_failure: change